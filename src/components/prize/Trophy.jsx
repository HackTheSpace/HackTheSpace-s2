import React, { useRef } from "react";
import { useInView, motion } from "framer-motion";

const Trophy = ({ rank, ranksub, amount, title }) => {
  const ref = useRef(null);
  const inView = useInView(ref, {
    once: true,
  });

  const animation = {
    visible: {
      opacity: 1,
      transition: {
        duration: 1.5,
        delay: 0.5,
      },
    },

    stroke: {
      pathLength: 1,
      // opacity: 1,
      transition: {
        duration: 1,
        delay: 0.5,

        ease: "easeInOut",
        // repeat: Infinity,
        // repeatType: "reverse",
      },
    },
    blink: {
      x: [-1, 1, -1, 1, 0],
      y: [-1, 1, -1, 1, 0],
      opacity: [1, 0.2, 1, 0, 0.2, 1],

      transition: {
        duration: 0.2, // Quick flash
        ease: "easeInOut",
        repeat: Infinity, // Repeat the flash
        repeatDelay: 2, // Pause between flashes
      },
    },
  };
  return (
    <div className="trophy" ref={ref}>
      <svg
        className="cup"
        xmlns="http://www.w3.org/2000/svg"
        width="275"
        height="337"
        viewBox="0 0 275 337"
        fill="none"
      >
        <g clipPath="url(#clip0_2148_561)">
          <g filter="url(#filter0_d_2148_561)">
            <motion.path
              variants={animation}
              initial={{ pathLength: 0, opacity: 0 }}
              animate={inView ? ["stroke", "visible"] : ""}
              fillRule="evenodd"
              clipRule="evenodd"
              d="M16.9496 1.32063C16.9496 2.04687 17.1498 3.89489 17.3943 5.42782C17.6387 6.96032 18.0313 9.54133 18.2666 11.1631C19.0814 16.7784 20.638 25.9899 21.1966 28.5001C21.4106 29.4631 21.7788 31.4535 22.0144 32.9232C22.4568 35.687 22.589 36.3872 24.0688 43.81C24.9207 48.0815 25.8952 52.5375 26.6488 55.605C26.8481 56.4159 27.5156 59.2594 28.1324 61.9238C28.7488 64.5882 29.6388 68.2846 30.1096 70.1381C30.5802 71.9916 31.1223 74.1716 31.3144 74.9825C31.5061 75.7934 31.9727 77.5943 32.3514 78.9844C32.7297 80.3745 33.2038 82.1754 33.4048 82.9863C33.6058 83.7972 34.0836 85.5032 34.4665 86.7775C35.2227 89.2941 35.5407 90.4062 36.5134 93.9388C36.8643 95.213 37.4334 97.1087 37.7783 98.1513C38.1233 99.1939 39.1968 102.606 40.1646 105.734C41.1318 108.862 42.3037 112.463 42.7691 113.738C43.2339 115.012 43.7102 116.434 43.8274 116.897C43.9449 117.36 44.1999 118.119 44.395 118.582C44.5896 119.045 45.0726 120.372 45.4682 121.531C46.6774 125.073 49.2519 132.074 50.7346 135.853C50.9165 136.317 51.5443 137.928 52.1296 139.434C53.8335 143.819 55.8355 148.776 56.6381 150.597C57.0468 151.524 57.7617 153.135 58.2265 154.178C58.6918 155.22 59.5885 157.305 60.2197 158.811C61.3419 161.488 61.7817 162.481 64.3246 168.079C67.3286 174.691 75.2341 190.218 78.8021 196.513C79.4586 197.672 80.3342 199.223 80.748 199.961C81.1617 200.699 81.9855 202.069 82.5782 203.007C83.1714 203.944 83.6565 204.813 83.6565 204.937C83.6565 205.062 84.5685 206.63 85.6826 208.423C86.7972 210.216 87.8493 211.966 88.0212 212.312C88.6283 213.535 91.666 218.248 96.3777 225.276C97.5083 226.963 98.4334 228.435 98.4334 228.549C98.4334 229.558 118.039 255.206 120.797 257.805C120.92 257.921 121.762 258.869 122.668 259.911C124.574 262.106 130.64 268.418 132.513 270.155L133.792 271.342L134.832 270.366C136.164 269.115 145.215 257.142 151.81 247.906C158.755 238.178 166.581 225.87 171.895 216.312C174.395 211.817 175.396 210.022 176.241 208.519C180.839 200.346 193.849 174.073 193.849 172.961C193.849 172.837 194.345 171.64 194.951 170.302C197.442 164.8 198.916 161.376 198.916 161.091C198.916 160.95 199.179 160.237 199.501 159.507C199.823 158.777 200.608 156.852 201.246 155.231C201.884 153.609 202.642 151.713 202.93 151.018C203.218 150.323 204.163 147.859 205.029 145.542C205.895 143.225 206.869 140.732 207.193 140.002C207.517 139.272 207.782 138.403 207.782 138.071C207.782 137.739 207.911 137.339 208.068 137.183C208.366 136.885 210.102 132.149 210.717 129.956C210.912 129.261 211.644 127.081 212.343 125.111C213.042 123.142 214.415 118.972 215.394 115.844C216.373 112.716 217.412 109.399 217.703 108.472C218.864 104.779 220.313 99.832 221.714 94.7813C222.003 93.7387 222.478 92.0326 222.77 90.99C223.061 89.9474 223.525 88.2413 223.802 87.1988C224.078 86.1562 224.467 84.7344 224.665 84.0394C224.864 83.3443 225.62 80.3113 226.345 77.2994C227.071 74.2874 227.835 71.1597 228.045 70.3488C228.496 68.5968 229.654 63.6597 230.168 61.2919C230.369 60.3651 230.84 58.1852 231.214 56.4475C231.588 54.7099 232.063 52.5299 232.271 51.6031C232.711 49.6414 234.473 40.2306 235.428 34.7531C235.791 32.6679 236.272 29.9193 236.496 28.645C236.721 27.3707 237.195 24.3377 237.55 21.905C237.905 19.4723 238.398 16.2097 238.645 14.6553C238.892 13.1005 238.982 11.6467 238.844 11.4239C238.636 11.0881 232.563 13.146 229.103 14.7248C228.638 14.9367 226.738 15.612 224.881 16.2253C223.023 16.8386 221.123 17.508 220.659 17.7127C218.327 18.7397 210.796 20.9344 204.826 22.3267C204.014 22.5162 202.019 22.988 200.393 23.3756C196.68 24.2606 192.633 25.0808 186.883 26.1137C171.963 28.7937 145.736 30.4206 132.475 29.4883C114.781 28.2448 108.833 27.7073 104.977 27.0038C103.816 26.7919 101.536 26.417 99.911 26.171C93.0209 25.128 88.4173 24.3508 87.0341 23.9978C86.2214 23.7905 84.2266 23.3301 82.6011 22.9754C74.6917 21.2479 63.0784 18.3395 61.4912 17.6891C61.0268 17.4987 59.6019 17.0193 58.3248 16.6242C57.0476 16.2291 55.673 15.7392 55.2699 15.5353C54.8667 15.3318 54.2912 15.165 53.9915 15.165C52.8271 15.165 39.8589 10.5923 37.1155 9.21442C36.7123 9.01181 36.1301 8.84625 35.8223 8.84625C35.514 8.84625 34.2775 8.37235 33.0742 7.79313C31.8708 7.21391 30.7429 6.74042 30.5676 6.74126C29.9555 6.74337 24.7473 4.45261 23.1856 3.49427C22.3192 2.96265 21.4807 2.5275 21.322 2.5275C20.478 2.5275 17.7941 1.02364 17.7941 0.550994C17.7941 0.247695 17.604 0 17.3718 0C17.1396 0 16.9496 0.594394 16.9496 1.32063ZM255.912 3.18045C253.938 3.91132 251.478 4.78836 250.444 5.12957L248.565 5.75007L248.06 9.08848C247.781 10.9247 247.244 14.7016 246.865 17.4819C245.559 27.0603 245.294 28.8615 244.909 30.7513C244.696 31.7939 244.321 33.879 244.075 35.385C242.937 42.3483 242.797 43.1217 241.135 51.6031C240.908 52.7616 240.433 54.9415 240.08 56.4475C239.726 57.9535 239.255 60.1335 239.032 61.2919C238.809 62.4503 238.319 64.7251 237.943 66.3469C237.567 67.9687 237.105 69.9591 236.917 70.77C236.02 74.6329 232.683 87.6263 232.265 88.8838C232.072 89.463 231.595 91.0743 231.204 92.4644C230.813 93.8545 230.345 95.4658 230.162 96.045C229.98 96.6242 229.495 98.3303 229.085 99.8363C228.675 101.342 227.306 105.702 226.043 109.525C224.781 113.348 223.588 117.044 223.393 117.739C223.199 118.434 222.448 120.614 221.724 122.584C221 124.553 220.049 127.207 219.61 128.481C219.17 129.756 218.321 132.077 217.723 133.639C217.124 135.202 216.188 137.666 215.642 139.115C215.096 140.565 214.265 142.604 213.795 143.646C213.325 144.689 212.045 147.722 210.951 150.386C209.857 153.051 208.491 156.273 207.913 157.548C206.727 160.168 206.209 161.325 204.609 164.919C202.023 170.732 200.187 174.569 196.551 181.757C191.807 191.134 189.481 195.606 189.205 195.881C189.089 195.997 188.615 196.85 188.152 197.777C187.689 198.704 186.216 201.325 184.88 203.603C183.543 205.881 182.45 207.827 182.45 207.929C182.45 208.03 181.5 209.641 180.339 211.508C179.178 213.376 178.228 214.987 178.228 215.087C178.228 215.188 176.471 218.032 174.323 221.408C172.175 224.784 170.223 227.861 169.986 228.248C169.156 229.596 163.598 237.836 160.275 242.64C156.328 248.348 147.72 259.934 145.155 262.99C144.729 263.498 143.969 264.445 143.467 265.095C142.964 265.745 142.237 266.655 141.852 267.116C141.467 267.578 140.517 268.743 139.741 269.705C138.088 271.755 135.897 274.354 135.569 274.655C135.442 274.771 134.427 275.995 133.312 277.375C131.437 279.697 128.955 282.563 124.195 287.907C120.313 292.263 106.46 306.317 99.6796 312.778C95.2639 316.986 89.0733 322.41 84.2898 326.263C82.8965 327.385 81.6616 328.422 81.5455 328.567C81.4295 328.712 80.5746 329.388 79.6457 330.07C78.7169 330.752 77.2919 331.927 76.4792 332.681C75.6665 333.434 74.6693 334.158 74.2626 334.29C73.8566 334.422 73.5238 334.706 73.5238 334.922C73.5238 335.138 73.3162 335.315 73.0629 335.315C72.8091 335.315 72.1184 335.694 71.5282 336.158L70.4546 337H140.832H211.21L207.912 334.378C206.099 332.936 204.52 331.651 204.404 331.522C204.288 331.393 201.723 329.313 198.705 326.901C195.686 324.489 193.121 322.401 193.005 322.261C192.889 322.121 191.617 321.112 190.179 320.019C188.741 318.925 187.316 317.794 187.012 317.505C186.709 317.215 185.606 316.323 184.561 315.521C183.516 314.72 182.566 313.948 182.45 313.806C182.334 313.664 178.344 310.446 173.584 306.656C168.824 302.865 164.834 299.645 164.718 299.499C164.602 299.354 160.139 295.742 154.802 291.473C140.505 280.039 140.38 279.927 140.982 279.164C141.201 278.885 143.734 275.718 146.611 272.126C149.487 268.534 152.401 264.837 153.085 263.911C153.769 262.986 154.448 262.133 154.592 262.018C154.737 261.902 155.689 260.67 156.707 259.279C157.725 257.889 158.9 256.385 159.316 255.935C159.733 255.486 160.074 254.978 160.074 254.807C160.074 254.636 160.314 254.245 160.608 253.938C161.441 253.07 170.2 240.75 172.983 236.532C174.358 234.447 175.593 232.646 175.726 232.53C176.063 232.238 187.516 214 187.516 213.756C187.516 213.648 188.466 212.031 189.627 210.163C190.788 208.295 191.738 206.683 191.738 206.581C191.738 206.479 192.18 205.689 192.72 204.824C193.26 203.96 194.47 201.831 195.41 200.094C196.35 198.356 197.552 196.176 198.082 195.249C201.651 189.013 211.546 169.252 215.38 160.707C215.9 159.548 216.683 157.854 217.12 156.942C217.557 156.029 217.914 155.143 217.914 154.972C217.914 154.801 218.571 153.241 219.374 151.507C220.177 149.773 221.896 145.731 223.195 142.525C224.493 139.319 225.714 136.317 225.907 135.853C226.23 135.076 227.277 132.396 228.047 130.377C228.607 128.907 229.825 125.774 230.175 124.901C230.361 124.437 231.003 122.684 231.602 121.004C232.201 119.324 233.157 116.67 233.725 115.107C234.293 113.543 235.269 110.652 235.891 108.683C236.515 106.713 237.173 104.723 237.355 104.259C237.537 103.796 237.987 102.469 238.355 101.311C238.723 100.152 239.422 97.9722 239.909 96.4663C240.396 94.9603 240.953 93.1594 241.147 92.4644C241.34 91.7693 241.81 90.158 242.191 88.8838C243.201 85.5003 243.497 84.4682 244.726 80.0375C245.336 77.8365 246.13 74.993 246.49 73.7188C247.219 71.1403 247.639 69.4304 248.284 66.424C248.524 65.3081 248.83 64.2175 248.964 64.0005C249.098 63.784 249.371 62.7064 249.571 61.6065C249.77 60.5067 250.245 58.3747 250.626 56.8688C251.007 55.3628 251.494 53.2776 251.707 52.235C251.921 51.1924 252.389 49.0124 252.746 47.3906C253.104 45.7688 253.677 43.0202 254.019 41.2825C254.574 38.4614 254.899 36.7162 256.33 28.8556C256.696 26.8446 257.586 21.0461 258.431 15.165C258.647 13.659 259.039 10.5313 259.302 8.21438C259.564 5.8975 259.833 3.81232 259.898 3.58063C259.963 3.34894 259.901 2.86534 259.759 2.50559C259.537 1.94281 259.002 2.03675 255.912 3.18045ZM0.90625 47.5309C0.90625 48.651 1.04853 49.7092 1.22247 49.8828C1.51125 50.1709 2.06855 52.12 2.97881 56.0263C3.56524 58.542 11.4316 81.5999 13.7575 87.62C15.353 91.7491 15.6789 92.6139 17.1714 96.6769C18.0225 98.9938 18.9656 101.458 19.2675 102.153C20.0346 103.92 20.3256 104.632 23.4869 112.474C26.6273 120.264 26.5989 120.196 28.1036 123.505C28.7031 124.824 29.1933 126.02 29.1933 126.164C29.1933 126.309 29.6835 127.505 30.2831 128.823C31.4356 131.358 31.5795 131.685 33.0061 135.011C33.5035 136.169 34.2575 137.875 34.6828 138.802C35.1075 139.729 36.0641 141.814 36.8084 143.436C38.8831 147.955 48.3931 167.075 50.2183 170.396C53.1496 175.729 54.6318 178.338 55.9596 180.5C56.6799 181.673 57.4594 182.949 57.6916 183.336C59.3305 186.065 63.2847 192.023 63.9003 192.691C65.5321 194.461 64.9726 192.762 61.9524 186.773C57.7282 178.398 52.7421 167.974 49.1818 160.075C48.6076 158.801 47.8788 157.189 47.5626 156.494C47.2468 155.799 46.7055 154.567 46.3606 153.756C46.0152 152.945 45.1261 150.955 44.3843 149.333C43.6426 147.711 42.4803 144.963 41.8013 143.225C40.5415 140.001 40.2088 139.181 39.4041 137.328C39.1529 136.748 38.1549 134.284 37.1867 131.851C36.2183 129.419 35.1825 126.859 34.8849 126.164C34.5873 125.469 34.0516 124.048 33.6944 123.005C33.0485 121.118 32.2871 118.985 29.1105 110.157C28.1936 107.608 27.2917 104.954 27.1064 104.259C26.921 103.564 26.3878 101.858 25.9217 100.468C23.5042 93.261 19.61 79.5556 18.59 74.6666C18.3843 73.6817 18.049 72.0708 17.8442 71.0859C17.6399 70.1011 17.2477 68.253 16.9725 66.9788C16.6976 65.7045 16.3033 63.7141 16.0964 62.5556C15.8899 61.3972 15.4272 58.8381 15.0683 56.8688C14.7095 54.8994 14.416 52.5648 14.416 51.6806C14.4165 49.4687 13.7811 48.4463 12.3963 48.4315C11.766 48.4248 9.92012 48.044 8.29467 47.5857C6.66921 47.1269 4.81282 46.6341 4.16939 46.49C3.52597 46.3463 2.89732 46.0637 2.77235 45.8619C2.64738 45.6601 2.17663 45.495 1.72572 45.495C1.02741 45.495 0.90625 45.7966 0.90625 47.5309ZM271.111 46.5359C269.602 47.0629 267.417 47.6939 266.256 47.9387C265.095 48.1834 263.664 48.485 263.077 48.6089C262.273 48.7787 261.989 49.1241 261.928 50.0083C261.883 50.6536 261.655 52.3673 261.422 53.8164C261.189 55.2655 260.782 57.8246 260.518 59.5033C260.254 61.1819 259.794 63.693 259.495 65.0831C259.196 66.4733 258.72 68.748 258.437 70.1381C257.657 73.9643 256.615 78.2059 255.279 82.9863C254.987 84.0288 254.541 85.6401 254.287 86.5669C253.892 88.0076 251.206 96.901 249.961 100.889C248.73 104.83 247.053 109.904 246.684 110.804C246.449 111.375 245.564 113.738 244.717 116.054C243.335 119.832 242.574 121.855 241.549 124.479C241.369 124.943 240.983 125.985 240.692 126.796C239.994 128.744 239.047 131.043 238.567 131.951C238.354 132.353 238.18 132.869 238.18 133.098C238.18 133.326 237.724 134.514 237.166 135.736C236.609 136.959 235.066 140.605 233.737 143.839C232.409 147.073 231.162 150.011 230.967 150.369C230.655 150.941 230.116 152.139 227.831 157.337C224.928 163.943 222.068 169.929 215.704 182.729C212.907 188.353 210.751 193.087 210.912 193.248C211.073 193.409 211.337 193.354 211.499 193.127C212.375 191.896 216.895 185.015 217.299 184.297C217.56 183.833 218.594 182.127 219.596 180.506C221.461 177.488 221.812 176.884 224.247 172.502C225.02 171.112 226.028 169.311 226.488 168.5C228.91 164.226 241.98 137.411 241.98 136.716C241.98 136.621 242.565 135.251 243.281 133.671C243.996 132.091 244.946 129.994 245.392 129.012C245.837 128.03 246.202 127.141 246.202 127.036C246.202 126.932 246.961 125.212 247.89 123.216C248.819 121.219 249.579 119.404 249.579 119.183C249.579 118.962 249.76 118.452 249.981 118.049C250.407 117.275 250.874 116.166 252.776 111.421C253.426 109.799 254.08 108.282 254.229 108.051C254.378 107.819 254.832 106.682 255.239 105.523C255.645 104.365 256.136 103.038 256.33 102.574C257.523 99.7272 259.55 94.5828 260.556 91.8527C261.2 90.1041 262.235 87.3462 262.857 85.7244C263.478 84.1026 264.345 81.733 264.783 80.4588C265.221 79.1845 266.367 75.9619 267.33 73.2975C268.292 70.6331 269.228 67.8844 269.41 67.1894C269.592 66.4943 270.121 64.883 270.586 63.6088C272.765 57.6325 274.898 49.4661 274.906 47.0747C274.912 45.2355 274.86 45.2279 271.111 46.5359Z"
              fill="url(#paint0_linear_2148_561)"
            />
          </g>
        </g>
        <defs>
          <filter
            id="filter0_d_2148_561"
            x="-19.0938"
            y="-20"
            width="314"
            height="377"
            filterUnits="userSpaceOnUse"
            colorInterpolationFilters="sRGB"
          >
            <feFlood floodOpacity="0" result="BackgroundImageFix" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha"
            />
            <feOffset />
            <feGaussianBlur stdDeviation="10" />
            <feComposite in2="hardAlpha" operator="out" />
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0.490196 0 0 0 0 0 0 0 0 0 0.94902 0 0 0 1 0"
            />
            <feBlend
              mode="normal"
              in2="BackgroundImageFix"
              result="effect1_dropShadow_2148_561"
            />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="effect1_dropShadow_2148_561"
              result="shape"
            />
          </filter>
          <linearGradient
            id="paint0_linear_2148_561"
            x1="137.906"
            y1="9.73232e-08"
            x2="134.406"
            y2="334.5"
            gradientUnits="userSpaceOnUse"
          >
            <stop stopColor="white" />
            <stop offset="1" stopColor="#7D00F2" />
          </linearGradient>
          <clipPath id="clip0_2148_561">
            <rect
              width="274"
              height="337"
              fill="white"
              transform="translate(0.90625)"
            />
          </clipPath>
        </defs>
      </svg>
      <motion.div
        variants={animation}
        initial={{ opacity: 0 }}
        animate={inView ? "visible" : ""}
        className="rank"
      >
        <h2>
          {rank}
          <super className="sub">{ranksub}</super>
        </h2>
      </motion.div>
      <motion.div
        variants={animation}
        initial={{ opacity: 0 }}
        animate={inView ? "blink" : ""}
        className="amount-container"
      >
        <motion.h2
          variants={animation}
          initial={{ opacity: 0 }}
          animate={inView ? "visible" : ""}
          className="amount"
        >
          {amount}
        </motion.h2>
      </motion.div>
      <motion.p
        variants={animation}
        initial={{ opacity: 0 }}
        animate={inView ? "visible" : ""}
        className="tag"
      >
        {title}
      </motion.p>
    </div>
  );
};

export default Trophy;
